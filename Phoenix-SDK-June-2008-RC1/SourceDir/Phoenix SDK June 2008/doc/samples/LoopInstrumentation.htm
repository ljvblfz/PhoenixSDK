<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 12 (filtered)">
<title>LoopInstrumentation Sample</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.msochpdefault, li.msochpdefault, div.msochpdefault
	{mso-style-name:msochpdefault;
	margin-right:0in;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
.MsoChpDefault
	{font-size:10.0pt;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;}
div.Section1
	{page:Section1;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>

<div class=Section1>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:14.0pt;font-family:"Arial","sans-serif"'>Loop Instrumentation</span></b></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>&nbsp;</span></b></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>&nbsp;</span></b></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>Sample
Name</span></b><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>:
LoopInstrumentation</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>&nbsp;</span></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>Sample
Category</span></b><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>:
plugin</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>&nbsp;</span></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>Description</span></b><span
style='font-size:10.0pt;font-family:"Arial","sans-serif"'>: This plugin
instrument loops to report loop entries, loop exits, and the number of
iterations on exits.</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>&nbsp;</span></p>

<p class=MsoNormal><b><span lang=FR style='font-size:10.0pt;font-family:"Arial","sans-serif"'>Source
Language</span></b><span lang=FR style='font-size:10.0pt;font-family:"Arial","sans-serif"'>:
C++</span></p>

<p class=MsoNormal><span lang=FR style='font-size:10.0pt;font-family:"Arial","sans-serif"'>&nbsp;</span></p>

<p class=MsoNormal><b><span lang=FR style='font-size:10.0pt;font-family:"Arial","sans-serif"'>Sample
Location</span></b><span lang=FR style='font-size:10.0pt;font-family:"Arial","sans-serif"'>:
</span><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'><a
href="../../Samples/LoopInstrumentation/cpp"><span lang=FR>Samples\LoopInstrumentation\cpp</span></a></span></p>

<p class=MsoNormal><span lang=FR style='font-size:10.0pt;font-family:"Arial","sans-serif"'>&nbsp;</span></p>

<p class=MsoNormal style='text-autospace:none'><b><span style='font-size:10.0pt;
font-family:"Arial","sans-serif"'>Usage</span></b><span style='font-size:10.0pt;
font-family:"Arial","sans-serif"'>: Uses the standard Phoenix plugin model for
C2.&nbsp; Example:</span></p>

<p class=MsoNormal style='text-autospace:none'><span style='font-size:10.0pt;
font-family:"Arial","sans-serif"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
cd %PhoenixSdkUserRoot%\samples\LoopInstrumentation\cpp</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
devenv LoopInstrumentation.vcproj /build debug</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
cl -nologo %PhoenixSdkUserRoot%Applications\tests\src\cpp\Instrumentation0.cpp
-d2 plugin:debug\LoopInstrumentation.dll </span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>&nbsp;
.\Instrumentation0.exe</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>&nbsp;</span></p>

<p class=MsoNormal><b><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>Detailed
Description</span></b><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>:
</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>This
sample inserts code in loop preheaders (header predecessors through
non-back-edges), headers and exit successors. These are respectively guaranteed
to correspond to pre-loop, body, and post-loop program points thanks to the
splitting of ambiguous (or <i>critical</i>) edges, as explained in the outline
of sample </span><a href="LoopPreheaderAndPostExit.htm">LoopPreheaderAndPostExit</a>.</p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>Preheader
instrumentation initializes an injected local variable to 0 and invokes printf
to display an “entering loop” message.</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>Header
instrumentation increments the injected loop counter.</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>Exit
instrumentation displays an “exiting loop” message that gives the number of
iterations through the loop.</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>Instrumentation
involves the generation of IR instructions, the creation of a local variable,
and the creation and access to global variables (the printf format strings),
including the static initialization of string variables using data instructions.</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>&nbsp;</span></p>

</div>

</body>

</html>
